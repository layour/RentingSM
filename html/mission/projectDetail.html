<!DOCTYPE html>
<html>

<head>
	<meta name="viewport" content="width=device-width, minimum-scale=1, maximum-scale=1">
	<meta charset="UTF-8">
	<title></title>
	<link rel="stylesheet" href="../../css/iuapmobile.um.css">
	<link rel="stylesheet" href="../../css/fonts/iconfont.css">
	<link rel="stylesheet" href="projectDetail.css">
	<script src="../../js/summer.js"></script>
	<script src="../../js/jquery.min.js"></script>
	<script src="../../js/font.js"></script>
	<script src="../../js/vue.js"></script>
	<script src="../../js/common.js"></script>
</head>

<body>
	<div class="um-win" id="index">
        <div class="um-content addCar" v-cloak>
            <div class="um-list-item-bodys" data-type="JXS" @click="openInfo()">
                经销商信息
                <span class="frp">
                    <i class="icon iconfont icon-enter"></i>
                </span>
            </div>
            <div class="um-list-item-bodys" data-type="KH" @click="openInfo()">
                客户信息
                <span class="frp">
                    <i class="icon iconfont icon-enter"></i>
                </span>
            </div>
            <div class="um-list-item-bodys" data-type="BJ" @click="openInfo()">
                工作背景
                <span class="frp">
                    <i class="icon iconfont icon-enter"></i>
                </span>
            </div>
            <div class="um-list-item-bodys" data-type="PO" @click="openInfo()" v-if="datas.condition && datas.condition.showSocial">
                配偶信息
                <span class="frp">
                    <i class="icon iconfont icon-enter"></i>
                </span>
            </div>
            <div class="um-list-item-bodys" data-type="JJ" @click="openInfo()">
                紧急联系人信息
                <span class="frp">
                    <i class="icon iconfont icon-enter"></i>
                </span>
            </div>
            <div class="um-list-item-bodys" data-type="DKK" @click="openInfo()">
                客户代扣卡信息
                <span class="frp" @click="changeDKK()">
                    <i class="oZF icon iconfont icon-modify" v-if="datas.condition && datas.condition.allowEditBank"></i>&nbsp;
                    <i class="icon iconfont icon-enter"></i>
                </span>
            </div>
            <div class="um-list-item-bodys" data-type="CL" @click="openInfo()">
                车辆信息
                <span class="frp" @click="changeCL()">
                    <i class="oZF icon iconfont icon-modify" v-if="datas.condition && datas.condition.allowEditEqu"></i>&nbsp;
                    <i class="icon iconfont icon-enter"></i>
                </span>
            </div>
            <div class="um-list-item-bodys" data-type="ZL" @click="openInfo()">
                租赁信息
                <span class="frp">
                    <i class="icon iconfont icon-enter"></i>
                </span>
            </div>
            <div class="um-list-item-bodys" data-type="FK" @click="openInfo()">
                风控资料
                <span class="frp">
                    <i class="oZF icon iconfont icon-modify"></i>&nbsp;
                    <i class="icon iconfont icon-enter"></i>
                </span>
            </div>
            <div class="um-list-item-bodys" data-type="GR" @click="openInfo()">
                个人担保人
                <span class="frp">
                    <i class="icon iconfont icon-enter"></i>
                </span>
            </div>
            <div class="um-list-item-bodys" data-type="QY" @click="openInfo()">
                企业担保人
                <span class="frp">
                    <i class="icon iconfont icon-enter"></i>
                </span>
            </div>
            <div class="um-list-item-bodys" data-type="SP" @click="openInfo()">
                上牌信息
                <span class="frp">
                    <i class="oZF icon iconfont icon-modify"></i>&nbsp;
                    <i class="icon iconfont icon-enter"></i>
                </span>
            </div>
            <div class="um-list-item-bodys" data-type="DY" @click="openInfo()">
                抵押信息
                <span class="frp">
                    <i class="oZF icon iconfont icon-modify"></i>&nbsp;
                    <i class="icon iconfont icon-enter"></i>
                </span>
            </div>
            <div class="um-list-item-bodys" data-type="GPS" @click="openInfo()">
                GPS信息
                <span class="frp">
                    <i class="oZF icon iconfont icon-modify"></i>&nbsp;
                    <i class="icon iconfont icon-enter"></i>
                </span>
            </div>
            <div class="um-list-item-bodys" data-type="FS" @click="openInfo()">
                复审批复信息
                <span class="frp">
                    <i class="oZF icon iconfont icon-modify"></i>&nbsp;
                    <i class="icon iconfont icon-enter"></i>
                </span>
            </div>
            <div class="um-list-item-bodys" data-type="CZR" @click="openInfo()">
                共同承租人信息
                <span class="frp">
                    <i class="oZF icon iconfont icon-modify"></i>&nbsp;
                    <i class="icon iconfont icon-enter"></i>
                </span>
            </div>
        </div>
        <div class="um-footer" v-if="datas.condition && datas.condition.isAllowEditPrj">
            <button type="button" @click="">修改</button>
        </div>
	</div>
	<script type="text/javascript">
		var projectDetail = new Vue({
			el: '#index',
			data: {
				procInsId: "",
                taskDefKey: "",
                link: "",
                view: "",
                datas: {}
			},
            methods: {
                getURL: function () {
                    var self = this;
                    summer.showProgress();
					ajaxRequest({
						type: 'post',
						url: 'appservice/sys/act/pdFormLink',
						param: {
                            procInsId: this.procInsId,  
                            taskDefKey: this.taskDefKey
						}
					}, function(res) {
						var Data = res.data;
						if (Data.flag == 1) {
                            self.link = 'appservice' + Data.datas.link;
                            self.getList();
						} else {
							summer.toast({
								msg: "获取信息失败"
							});
						}
					}, function(err) {
						summer.hideProgress();
						summer.toast({
							msg: "获取信息失败"
						});
					});
                },
                getList: function () {
                    var self = this;
                    ajaxRequest({
						type: 'post',
						url: this.link,
						param: {
                            // procInsId: this.procInsId,  
                            procInsId: "101215",  
                            // taskDefKey: this.taskDefKey,
                            taskDefKey: "prj_hetongqianshu",
                            status: this.view // 处理时传空，查看时传递view
						}
					}, function(res) {
                        summer.hideProgress();
						var Data = res.data;
						if (Data.flag == 1) {
                            self.datas = Data.datas
						} else {
							summer.toast({
								msg: "获取信息失败"
							});
						}
					}, function(err) {
						summer.hideProgress();
						summer.toast({
							msg: "获取信息失败"
						});
					});
                },
                openInfo: function (ev) {
                    var ev = ev || window.event;
                    var itemType = ev.currentTarget.dataset.type;
                    var url = "";
                    var title = "";
                    var pageId = "";
                    switch (itemType) {
                        case 'JXS':
                            url = "html/mission/JXSInfoPage.html";
                            title = "经销商信息";
                            pageId = "JXSInfoPage";
                            break;
                        case 'KH':
                            url = "html/mission/KHInfoPage.html";
                            title = "客户信息";
                            pageId = "KHInfoPage";
                            break;
                        case 'BJ':
                            url = "html/mission/BJInfoPage.html";
                            title = "工作背景";
                            pageId = "BJInfoPage";
                            break;
                        case 'PO':
                            url = "html/mission/POInfoPage.html";
                            title = "配偶信息";
                            pageId = "POInfoPage";
                            break;
                        case 'JJ':
                            url = "html/mission/JJInfoPage.html";
                            title = "紧急联系人信息";
                            pageId = "JJInfoPage";
                            break;
                        case 'DKK':
                            url = "html/mission/DKKInfoPage.html";
                            title = "客户代扣卡信息";
                            pageId = "DKKInfoPage";
                            break;
                        case 'CL':
                            url = "html/mission/CLInfoPage.html";
                            title = "车辆信息";
                            pageId = "CLInfoPage";
                            break;
                        default:
                            break;
                    }
                    summer.openWin({
                        id: pageId,
                        url: url,
                        create: false,
                        type: 'actionBar',
                        actionBar: {
                            title: title,
                            titleColor: "#ffffff", //注意必须是6位数的颜色值。（3位数颜色值会不正常）
                            backgroundColor: "#039be5",
                            leftItem: {
                                image: "img/back.png",
                                method: "", //返回按钮自定义事件
                                text: "返回",
                                textColor: "#ffffff" //返回文字颜色，注意必须是6位数的颜色值。（3位数颜色值会不正常）
                            }
                        },
                        pageParam: {
                            datas: this.datas
                        }
                    });
                },
                changeDKK: function (ev) {
                    var ev = ev || window.event;
                    ev.cancelBubble = true;
                    if (!this.datas.condition || !this.datas.condition.allowEditBank) {
                        return;
                    }
                    summer.openWin({
                        id: 'DKKInfoPage',
                        url: 'html/mission/DKKInfoPage.html',
                        create: false,
                        type: 'actionBar',
                        actionBar: {
                            title: "客户代扣卡信息",
                            titleColor: "#ffffff", //注意必须是6位数的颜色值。（3位数颜色值会不正常）
                            backgroundColor: "#039be5",
                            leftItem: {
                                image: "img/back.png",
                                method: "", //返回按钮自定义事件
                                text: "返回",
                                textColor: "#ffffff" //返回文字颜色，注意必须是6位数的颜色值。（3位数颜色值会不正常）
                            },
                            rightItems: [{
                                type: "text",
                                text: "保存",
                                textColor: "#ffffff",
                                method: "DKKInfoPage.save()"
                            }]
                        },
                        pageParam: {
                            datas: this.datas,
                            pageType: 'change'
                        }
                    });
                },
                changeCL: function (ev) {
                    var ev = ev || window.event;
                    ev.cancelBubble = true;
                    if (!this.datas.condition || !this.datas.condition.allowEditEqu) {
                        return;
                    }
                    summer.openWin({
                        id: 'CLInfoPage',
                        url: 'html/mission/CLInfoPage.html',
                        create: false,
                        type: 'actionBar',
                        actionBar: {
                            title: "车辆信息",
                            titleColor: "#ffffff", //注意必须是6位数的颜色值。（3位数颜色值会不正常）
                            backgroundColor: "#039be5",
                            leftItem: {
                                image: "img/back.png",
                                method: "", //返回按钮自定义事件
                                text: "返回",
                                textColor: "#ffffff" //返回文字颜色，注意必须是6位数的颜色值。（3位数颜色值会不正常）
                            },
                            rightItems: [{
                                type: "text",
                                text: "保存",
                                textColor: "#ffffff",
                                method: "CLInfoPage.save()"
                            }]
                        },
                        pageParam: {
                            datas: this.datas,
                            pageType: 'change'
                        }
                    });
                }
            }
		});
		summerready = function() {
            projectDetail.procInsId = summer.pageParam.procInsId;
			projectDetail.taskDefKey = summer.pageParam.taskDefKey;
            projectDetail.view = summer.pageParam.view ? summer.pageParam.view : "";
            projectDetail.getURL();
		};
	</script>
</body>

</html>
